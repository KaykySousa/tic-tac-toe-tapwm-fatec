<main class="from-purple-900 to-purple-600 bg-gradient-to-br w-full min-h-screen">
	<div class="min-h-screen w-full max-w-lg mx-auto p-4 flex justify-center items-center flex-col animate-fade-in">
		<div class="w-full mb-16 flex flex-col justify-between gap-x-8 gap-y-2">

		</div>
		<section id="board" class="w-full grid grid-cols-3 gap-3">
			{{#each board as |value index|}}
			<button data-position="{{ index }}"
				class="bg-white rounded-lg aspect-square shadow-md transition-[transform,opacity,background] hover:-translate-y-1 disabled:bg-white/80 disabled:cursor-not-allowed hover:bg-white/80"></button>
			{{/each}}
		</section>
		<button
			class="text-white flex border-white border-2 rounded-md py-3 px-6 gap-2 font-medium mt-16 transition-colors shadow-md hover:text-purple-700 hover:bg-white">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
				<path fill-rule="evenodd"
					d="M3 2.25a.75.75 0 0 1 .75.75v.54l1.838-.46a9.75 9.75 0 0 1 6.725.738l.108.054A8.25 8.25 0 0 0 18 4.524l3.11-.732a.75.75 0 0 1 .917.81 47.784 47.784 0 0 0 .005 10.337.75.75 0 0 1-.574.812l-3.114.733a9.75 9.75 0 0 1-6.594-.77l-.108-.054a8.25 8.25 0 0 0-5.69-.625l-2.202.55V21a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 3 2.25Z"
					clip-rule="evenodd" />
			</svg>
			Desistir
		</button>
	</div>
</main>

<script>
	const board = document.getElementById('board');
	const buttons = board.querySelectorAll('button');

	buttons.forEach((button) => {
		button.addEventListener('click', handleClick);
	});

	async function handleClick(event) {
		const button = event.target;
		const { position } = button.dataset;

		try {
			const res = await fetch("/move", {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
				},
				body: JSON.stringify({ position }),
			});

			if (!res.ok) {
				throw new Error("Erro ao fazer a jogada.");
			}
		} catch (error) {
			alert(error.message);
			console.error(error);
		}

	}
</script>